<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Laberinto Básico</title>
  <style>
    body {
      background: #000;
      margin: 0;
      display: flex;
      justify-content: center;
    }

    canvas {
      background-color: #eee;
      margin-top: 20px;
    }
  </style>
</head>
<body>
<canvas id="game" width="320" height="320"></canvas>

<script>
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");

  const tileSize = 32;
  const maze = [
    "####################",
    "#     #       #    #",
    "# ### # ##### # ## #",
    "# #   #     # #    #",
    "# # ##### ### ######",
    "#       #     #    #",
    "##### # # ##### ## #",
    "#   # # #       #  #",
    "# # # ### ####### ##",
    "# #     #       #  #",
    "#################E##"
  ];

  let player = { x: 1, y: 1 };

  function drawMaze() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    maze.forEach((row, y) => {
      [...row].forEach((cell, x) => {
        if (cell === "#") {
          ctx.fillStyle = "black";
        } else if (cell === "E") {
          ctx.fillStyle = "green";
        } else {
          ctx.fillStyle = "white";
        }
        ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);
      });
    });

    // Jugador
    ctx.fillStyle = "blue";
    ctx.fillRect(player.x * tileSize, player.y * tileSize, tileSize, tileSize);
  }

  function canMoveTo(x, y) {
    const row = maze[y];
    if (!row) return false;
    const cell = row[x];
    return cell !== "#";
  }

  window.addEventListener("keydown", (e) => {
    let dx = 0, dy = 0;
    if (e.key === "ArrowUp") dy = -1;
    if (e.key === "ArrowDown") dy = 1;
    if (e.key === "ArrowLeft") dx = -1;
    if (e.key === "ArrowRight") dx = 1;

    const newX = player.x + dx;
    const newY = player.y + dy;

    if (canMoveTo(newX, newY)) {
      player.x = newX;
      player.y = newY;
    }

    // Meta alcanzada
    if (maze[player.y][player.x] === "E") {
      alert("¡Ganaste!");
      player = { x: 1, y: 1 };
    }

    drawMaze();
  });

  drawMaze();
</script>
</body>
</html>